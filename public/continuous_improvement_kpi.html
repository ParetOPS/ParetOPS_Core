<!--
  continuous_improvement_kpi.html - CONFIDENTIAL - PROPERTY OF PARETOPS

  Please contact support@paretops.com for support, contributions, or usage questions.

  DESCRIPTION:
  This HTML document is part of the ParetOPS platform and hosts the user interface
  for Continuous Improvement (CI) projects. It allows users to create, view, and analyze
  DMAIC-based initiatives using real performance data from the shop floor.

  PURPOSE:
  - Visualize and manage lean/6σ improvement projects.
  - Navigate between DMAIC phases (Define, Measure, Analyze, Improve, Control).
  - Display key statistical metrics, trends, and charts tied to selected KPIs.
  - Provide intuitive project creation and selection tools.

  FEATURES:
  - Modal-based project creation with start and closure dates.
  - Collapsible phase sections with dynamic content.
  - Chart.js for rendering boxplots and data visualizations.
  - Bootstrap for consistent layout and modal styling.
  - Luxon for timezone-aware date formatting.

  DEPLOYMENT:
  - Served statically from /public/continuous_improvement_kpi.html.
  - This interface fetches data via JavaScript from backend API endpoints.
  - Requires supporting JS logic from /public/js/kpi_continuous.js.

  LIMITATIONS:
  - Marked as "alpha" — data or features may be incomplete or under testing.
  - Project logic and backend handling must be synchronized with JS and database schema.

  AUTHOR:
  Paulin Colin BANCKAERT — Initial release with ParetOPS v3.0.0

  VERSIONING:
  - Tracked in Git. Please tag deployments and document major UI/UX revisions.
-->


<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Continuous Improvement KPI</title>

  <!-- Bootstrap CSS for layout and modal styling -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css">
  <link rel="icon" type="image/png" href="/favicon.png">


  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

  <script src="https://cdn.jsdelivr.net/npm/luxon@3/build/global/luxon.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/chartjs-adapter-luxon@1"></script>


  <!-- Font Awesome for optional icons -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">
</head>

<style>
  .phase-content.collapsed {
    display: none;
  }

  .card-body.collapsed {
    display: none;
  }
  
  .phase-toggle {
    cursor: pointer;
    background-color: #f8f9fa;
    padding: 5px 10px;
    margin-top: 10px;
    border: 1px solid #ddd;
    font-weight: bold;
    font-size: 0.95rem;
  }

  #analyze-boxplot {
    width: 100% !important;
    height: 350px !important;
  }


  .scroll-box {
    max-height: 300px;
    overflow-y: auto;
    padding-right: 8px;
  }

  canvas,
  img {
    max-height: 300px;
  }

  .chartjs-size-monitor {
    display: none !important;
  }

</style>


<body>

  <!-- Main container for the Continuous Improvement dashboard -->
  <div class="container mt-4">
    <div id="alpha-disclaimer" class="alert alert-warning d-flex justify-content-between align-items-center mb-4" role="alert" style="font-size: 0.95rem;">
      <div><i class="fas fa-flask me-2"></i> This section is an experimental plug-in currently in alpha version. Features and data may be incomplete or unstable.</div>
      <button type="button" class="btn-close" aria-label="Close" onclick="document.getElementById('alpha-disclaimer').remove()"></button>
    </div>
    
  
    
    <!-- Header and New Project button -->
    <div class="d-flex justify-content-between align-items-center mb-3">
      <h3>Continuous Improvement Projects - Quick Sigma</h3>
      <button class="btn btn-primary" onclick="openNewProjectModal()">+ New Project</button>
    </div>

    <!-- Project cards will be injected here -->
    <div id="ci-project-selector" class="d-flex flex-wrap gap-3 mb-4"></div>

    <!-- Section where project phase content will be displayed -->
    <div id="ci-project-details"></div>
  </div>

  <!-- Modal for creating a new project -->
  <div class="modal fade" id="newProjectModal" tabindex="-1">
    <div class="modal-dialog">
      <div class="modal-content">
        <form onsubmit="submitNewProject(event)">
          <div class="modal-header">
            <h5 class="modal-title">Create New Project</h5>
            <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
          </div>
          <div class="modal-body">
            <label>Project Title</label>
            <input type="text" class="form-control mb-2" id="newProjectTitle" required>
            <label>Start Date</label>
            <input type="date" class="form-control mb-2" id="newProjectStartDate" required>
            <label>Expected Closure Date</label>
            <input type="date" class="form-control mb-2" id="newProjectClosureDate">
          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
            <button type="submit" class="btn btn-primary">Create</button>
          </div>
        </form>
      </div>
    </div>
  </div>
    
  <script>
    setTimeout(() => {
      const disclaimer = document.getElementById('alpha-disclaimer');
      if (disclaimer) {
        disclaimer.classList.add('fade-out');
        setTimeout(() => disclaimer.remove(), 1000); // Remove after fade out
      }
    }, 10000);
  </script>
  
  <!-- Bootstrap JS must be loaded before any Bootstrap-based scripts like Modal -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>

  <!-- Custom script that initializes and manages the CI app -->
  <script src="js/kpi_continuous.js"></script>
</body>
</html>
